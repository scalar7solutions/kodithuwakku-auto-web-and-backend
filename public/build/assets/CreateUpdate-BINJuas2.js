import{d as u,J as f,e as v,o as d,w as b,f as o,j as m,y as p,B as w,k as a,K as i,E as n,G as x,H as S,N as P,g as _,F as h}from"./index-Cq6CXwRA.js";import{A as V}from"./AppLayout-DO_EcNMo.js";import{F as C}from"./FileInputComponent-CiqSnrrK.js";import A from"./SuspendedUserAlert-rJjgYOID.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D2OW0BUk.js";const I={components:{Link:u.Link,AppLayout:V,FileInputComponent:C,SuspendedUserAlert:A},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object},data(){return{form:u.useForm({id:"",name:"",email:"",mobile_no:"",role:"",branch:"",password:"",password_confirmation:"",profile_image:""}),password:u.useForm({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){var s;let l=this;this.backendUser&&(this.form.id=this.backendUser.id,this.form.name=this.backendUser.name,this.form.email=this.backendUser.email,this.form.mobile_no=this.backendUser.mobile_no,this.form.role=this.backendUser.roles.length>0?this.backendUser.roles[0].id:"",this.form.branch=(s=this.backendUser.branch)==null?void 0:s.id),$(".card-body").on("change","#role",function(t){l.form.role=$(t.target).val()}),$(".card-body").on("change","#branch",function(t){l.form.branch=$(t.target).val()})},computed:{profileImage(){return this.backendUser?this.backendUser.profile_photo_path??"":""}},methods:{submit(){this.form.post(this.backendUser?route("settings.users.update"):route("settings.users.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(l=>({...l,id:this.form.id})).put(route("settings.users.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})}}},M={class:"row"},E={class:"col-md-12"},L={class:"card mb-4"},B={class:"card-body"},N={class:"row"},R={class:"mb-3 col-md-6"},j={class:"text-danger"},D={class:"mb-3 col-md-6"},O={class:"text-danger"},T={class:"mb-3 col-md-6"},W={class:"text-danger"},q={class:"mb-3 col-md-6"},G=["value"],H={class:"text-danger"},J={key:0,class:"mb-3 col-md-6"},K={class:"text-danger"},Y={key:1,class:"mb-3 col-md-6"},z={class:"text-danger"},Q={class:"mb-3 col-md-6"},X={class:"text-danger"},Z={class:"mt-2"},ss=["disabled"],os={key:0,class:"card"},es={class:"card-body"},rs={class:"row"},ts={key:0,class:"mb-3 col-md-6"},ns={class:"text-danger"},ls={key:1,class:"mb-3 col-md-6"},ds={class:"text-danger"},as={class:"mt-2"},is=["disabled"],ms={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},ps={class:"modal-dialog modal-sm",role:"document"},cs={class:"modal-content"},fs={class:"modal-body py-0 px-3"},us={class:"row"},bs={class:"col mb-1"},ws={class:"text-danger"};function _s(l,s,t,gs,e,c){const U=f("SuspendedUserAlert"),k=f("FileInputComponent"),g=f("Link"),y=f("AppLayout");return d(),v(y,null,{default:b(()=>[o("div",M,[o("div",E,[o("div",L,[s[24]||(s[24]=o("div",{class:"card-header pb-0"},[o("h5",null,"Backend Users"),o("p",null,"Manage Backend Users.")],-1)),s[25]||(s[25]=o("hr",null,null,-1)),o("div",B,[t.backendUser&&t.backendUser.deleted_at?(d(),v(U,{key:0,userId:t.backendUser.id},null,8,["userId"])):p("",!0),o("form",{id:"formAccountSettings",onSubmit:s[7]||(s[7]=w((...r)=>c.submit&&c.submit(...r),["prevent"]))},[o("div",N,[o("div",R,[s[13]||(s[13]=o("label",{for:"name",class:"form-label"},"Full Name",-1)),a(o("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":s[0]||(s[0]=r=>e.form.name=r)},null,512),[[i,e.form.name]]),o("div",j,n(e.form.errors.name),1)]),o("div",D,[s[14]||(s[14]=o("label",{for:"email",class:"form-label"},"Email",-1)),a(o("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":s[1]||(s[1]=r=>e.form.email=r)},null,512),[[i,e.form.email]]),o("div",O,n(e.form.errors.email),1)]),o("div",T,[s[15]||(s[15]=o("label",{for:"mobile_no",class:"form-label"},"Mobile No",-1)),a(o("input",{class:"form-control",type:"mobile_no",id:"mobile_no",name:"mobile_no","onUpdate:modelValue":s[2]||(s[2]=r=>e.form.mobile_no=r)},null,512),[[i,e.form.mobile_no]]),o("div",W,n(e.form.errors.mobile_no),1)]),o("div",q,[s[17]||(s[17]=o("label",{for:"role",class:"form-label"},"Role",-1)),a(o("select",{class:"select2 form-control form-select",id:"role","aria-label":"Default select example","onUpdate:modelValue":s[3]||(s[3]=r=>e.form.role=r)},[s[16]||(s[16]=o("option",{selected:"",value:""},"-- Select --",-1)),(d(!0),m(x,null,S(t.allRoles,r=>(d(),m("option",{key:r.id,value:r.id},n(r.name),9,G))),128))],512),[[P,e.form.role]]),o("div",H,n(e.form.errors.role),1)]),s[22]||(s[22]=o("div",{class:"h5 my-4"},"Authentication",-1)),t.backendUser?p("",!0):(d(),m("div",J,[s[18]||(s[18]=o("label",{for:"password",class:"form-label"},"Password",-1)),a(o("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":s[4]||(s[4]=r=>e.form.password=r)},null,512),[[i,e.form.password]]),o("div",K,n(e.form.errors.password),1)])),t.backendUser?p("",!0):(d(),m("div",Y,[s[19]||(s[19]=o("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),a(o("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":s[5]||(s[5]=r=>e.form.password_confirmation=r)},null,512),[[i,e.form.password_confirmation]]),o("div",z,n(e.form.errors.password),1)])),o("div",Q,[s[20]||(s[20]=o("label",{for:"profile_image",class:"form-label me-3"},"Profile Image",-1)),s[21]||(s[21]=o("br",null,null,-1)),_(k,{isRequired:!1,id:"profile_image",prvImage:c.profileImage,modelValue:e.form.profile_image,"onUpdate:modelValue":s[6]||(s[6]=r=>e.form.profile_image=r)},null,8,["prvImage","modelValue"]),o("div",X,n(e.form.errors.profile_image),1)])]),o("div",Z,[o("button",{type:"submit",class:"btn btn-main me-2",disabled:e.form.processing},n(t.backendUser?"Update":"Save"),9,ss),_(g,{class:"btn btn-outline-danger",href:l.route("settings.users")},{default:b(()=>s[23]||(s[23]=[h("Cancel")])),_:1,__:[23]},8,["href"])])],32)])]),t.backendUser&&t.backendUser.deleted_at==null?(d(),m("div",os,[s[29]||(s[29]=o("div",{class:"card-header pb-0"},[o("h5",null,"Update Password")],-1)),o("div",es,[o("form",{id:"formAccountSettings",onSubmit:s[10]||(s[10]=w((...r)=>l.updatePasssword&&l.updatePasssword(...r),["prevent"]))},[o("div",rs,[t.backendUser?(d(),m("div",ts,[s[26]||(s[26]=o("label",{for:"password",class:"form-label"},"Password",-1)),a(o("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":s[8]||(s[8]=r=>e.password.password=r)},null,512),[[i,e.password.password]]),o("div",ns,n(e.password.errors.password),1)])):p("",!0),t.backendUser?(d(),m("div",ls,[s[27]||(s[27]=o("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),a(o("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":s[9]||(s[9]=r=>e.password.password_confirmation=r)},null,512),[[i,e.password.password_confirmation]]),o("div",ds,n(e.password.errors.password),1)])):p("",!0)]),o("div",as,[o("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:e.form.processing||!(e.password.password.length>0&&e.password.password_confirmation.length>0)}," Update ",8,is),_(g,{class:"btn btn-outline-danger",href:l.route("settings.users")},{default:b(()=>s[28]||(s[28]=[h("Cancel")])),_:1,__:[28]},8,["href"])])],32)])])):p("",!0)]),o("div",ms,[o("div",ps,[o("div",cs,[s[31]||(s[31]=o("div",{class:"modal-header px-3 pb-2"},[o("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1)),o("form",{id:"formAccountDelete",onSubmit:s[12]||(s[12]=w((...r)=>c.changePassword&&c.changePassword(...r),["prevent"]))},[o("div",fs,[o("div",us,[o("div",bs,[a(o("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":s[11]||(s[11]=r=>e.password.confirm_password=r)},null,512),[[i,e.password.confirm_password]]),o("div",ws,n(e.password.errors.confirm_password),1)])])]),s[30]||(s[30]=o("div",{class:"modal-footer px-3 pb-3"},[o("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),o("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1))],32)])])])])]),_:1})}const Ss=F(I,[["render",_s]]);export{Ss as default};
