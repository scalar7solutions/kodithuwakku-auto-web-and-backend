import{d as p,J as i,e as h,o as _,w as u,f as t,B as w,g as a,k as y,K as C,E as d,F as V}from"./index-Cq6CXwRA.js";import{S as E,A as I}from"./AppLayout-VDZI49Qy.js";import{F as S}from"./FileInputComponent-CiqSnrrK.js";import{E as k}from"./Editor-qk8kO09V.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D2OW0BUk.js";const L={components:{Link:p.Link,AppLayout:I,Editor:k,FileInputComponent:S,SelectInputComponentVue:E},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object,vehicle_manufacture:Object,testimonial:Object,homebanner:Object,event:Object},data(){return{apiKey:void 0,form:p.useForm({id:"",name:"",status:"",image:"",editorContent:""})}},mounted(){var e;this.event&&(this.form.id=this.event.id,this.form.name=this.event.name,this.form.status=this.event.status,this.form.editorContent=this.event.editorContent);var s=(e=this.branch)==null?void 0:e.media.filter(n=>n.custom_properties.type=="galery");s&&s.length>0&&(s.forEach(n=>{this.form.images.push(n)}),this.form.galery_images=s.map(n=>({previewURL:n.original_url}))||[])},computed:{image(){return this.event&&this.event.media.length>0?this.event.media[0].original_url:""}},methods:{submit(){this.form.post(this.event?route("events.update"):route("events.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})}},handleDragOver(s){s.preventDefault()},handleDrop(s){s.preventDefault();const e=s.dataTransfer.files;console.log("Dropped files:",e);for(let n=0;n<e.length;n++){const l=e[n];l.previewURL=URL.createObjectURL(l),this.form.images.push(e[n])}},removeImage(s){this.form.removed_images.push(this.form.images[s]),this.form.galery_images.splice(s,1)[0]}},U={class:"row"},O={class:"card mb-4"},j={class:"card-body"},A={class:"row"},D={class:"mb-3 col-md-6"},N={class:"text-danger"},R={class:"mb-3 col-md-6"},F={class:"text-danger"},M={class:"mt-2"},B=["disabled"];function T(s,e,n,l,o,m){const f=i("Editor"),c=i("FileInputComponent"),v=i("SelectInputComponentVue"),g=i("Link"),b=i("AppLayout");return _(),h(b,null,{default:u(()=>[t("div",U,[t("div",O,[e[10]||(e[10]=t("div",{class:"card-header pb-0"},[t("h5",null,"News and Events"),t("p",null,"Manage News and Events.")],-1)),e[11]||(e[11]=t("hr",null,null,-1)),t("div",j,[t("form",{id:"formAccountSettings",onSubmit:e[4]||(e[4]=w((...r)=>m.submit&&m.submit(...r),["prevent"]))},[t("div",A,[t("div",D,[e[5]||(e[5]=t("label",{for:"name",class:"form-label"},"News / Event Title",-1)),y(t("input",{class:"form-control",type:"text",id:"name",name:"Name","onUpdate:modelValue":e[0]||(e[0]=r=>o.form.name=r)},null,512),[[C,o.form.name]]),t("div",N,d(o.form.errors.name),1)]),t("div",null,[e[6]||(e[6]=t("label",{for:"description",class:"form-label"},"Description",-1)),a(f,{modelValue:o.form.editorContent,"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.editorContent=r),"api-key":o.apiKey,init:{plugins:"lists link image table code help wordcount"}},null,8,["modelValue","api-key"])]),t("div",R,[e[7]||(e[7]=t("label",{for:"image",class:"form-label me-3"},"Image",-1)),e[8]||(e[8]=t("br",null,null,-1)),a(c,{isRequired:!1,id:"image",prvImage:m.image,modelValue:o.form.image,"onUpdate:modelValue":e[2]||(e[2]=r=>o.form.image=r)},null,8,["prvImage","modelValue"]),t("div",F,d(o.form.errors.image),1)])]),a(v,{id:"status",label:"News / Events status",error:o.form.errors.status,options:[{id:"1",name:"Active"},{id:"0",name:"Inactive"}],modelValue:o.form.status,"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.status=r)},null,8,["error","modelValue"]),t("div",M,[t("button",{type:"submit",class:"btn btn-main me-2",disabled:o.form.processing},d(n.event?"Update":"Save"),9,B),a(g,{class:"btn btn-outline-danger",href:s.route("events.index")},{default:u(()=>e[9]||(e[9]=[V("Cancel")])),_:1,__:[9]},8,["href"])])],32)])])])]),_:1})}const H=x(L,[["render",T],["__scopeId","data-v-8aecfd19"]]);export{H as default};
