import{d as T,J as L,j as n,o as l,y as f,f as e,g as _,x as h,G as m,H as p,w as b,F as u,E as a,T as k}from"./index-Cq6CXwRA.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={components:{Link:T.Link},name:"LeaseCar",props:{countries:{type:Array,default:()=>[]},vehicles:{type:Array,default:()=>[]},models:{type:Array,default:()=>[]},manufactures:{type:Array,default:()=>[]}},data(){return{activeTab:"",componentId:"firstSection_"+Date.now(),maxCards:8}},computed:{activemanufactures(){return this.activeTab==="ALL"?null:this.manufactures.find(t=>t.title===this.activeTab)||null},filteredVehicles(){if(this.activeTab==="ALL")return console.log("FirstSection - Showing ALL vehicles"),this.vehicles;if(!this.activemanufactures)return console.log("FirstSection - No active manufacturer selected"),[];const s=this.vehicles.filter(t=>{const o=t.manufacture_id===this.activemanufactures.id,d=t.manufacture&&t.manufacture.id===this.activemanufactures.id,c=t.manufacture&&t.manufacture.title===this.activemanufactures.title;return o||d||c});return console.log(`FirstSection - Filtered ${s.length} vehicles for ${this.activemanufactures.title}`),s},visibleVehicles(){return this.filteredVehicles.slice(0,this.maxCards)}},mounted(){console.log("FirstSection - Vehicles Data:",this.vehicles),console.log("FirstSection - Manufactures Data:",this.manufactures),console.log("FirstSection - Models Data:",this.models),this.manufactures.length>0&&(this.activeTab="ALL"),this.updateMaxCards(),typeof window<"u"&&window.addEventListener("resize",this.updateMaxCards),this.$nextTick(()=>{console.log("FirstSection - Active Tab:",this.activeTab),console.log("FirstSection - Filtered Vehicles:",this.filteredVehicles)})},beforeUnmount(){typeof window<"u"&&window.removeEventListener("resize",this.updateMaxCards)},methods:{availabilityColor(s){switch(s){case"Available":return"availability-available";case"Arriving":return"availability-arriving";case"Sold":return"availability-sold";default:return""}},getManufacturerModel(s){if(s&&s.manufacture&&s.vehicle_model)return`${s.manufacture.title||s.manufacture.name||""} ${s.vehicle_model.title||s.vehicle_model.name||""}`.trim();if(!s||!s.manufacture_id||!s.vehicle_model_id)return console.warn("Invalid car data or missing IDs:",s),"";const t=this.manufactures.find(d=>d.id===s.manufacture_id)||{},o=this.models.find(d=>d.id===s.vehicle_model_id)||{};return`${t.name||t.title||""} ${o.title||o.name||""}`.trim()},formatPrice(s){return s==null?"0":(Number(s)||0).toLocaleString("en-LK",{minimumFractionDigits:0,maximumFractionDigits:0})},setActiveTab(s){console.log("Setting activeTab to:",s),this.activeTab=s},getMainImage(s){const t=s.media.find(d=>{var c;return((c=d.custom_properties)==null?void 0:c.type)==="vehicle_main"}),o=s.media[0];return(t==null?void 0:t.original_url)||(o==null?void 0:o.original_url)||"/images/placeholder.png"},updateMaxCards(){if(typeof window>"u")return;const s=window.innerWidth;s<=767?this.maxCards=4:s<=1023?this.maxCards=6:s<=1366?this.maxCards=6:this.maxCards=8}}},x={class:"buying-essentials-section"},S={key:0,class:"lease-section container px-3"},M={class:"tabs-container text-center pb-5"},F={class:"tabs"},V=["onClick"],D={class:"car-grid"},N={class:"image-container"},I=["src"],E={class:"image-counter"},P={class:"card-content"},B={class:"price-section"},R={class:"price-left"},K={class:"price"},z={class:"price-note"},U={class:"price-right"},j={class:"detail-item"},H={class:"detail-item"},O={class:"detail-item"},W={key:1,style:{color:"green"}},G={key:0,class:"detail-item"},J={class:"car-details"},Y={key:0,class:"car-name"},q={key:1,class:"car-name"},Q={class:"features-grid"},X={class:"feature-item feature-left"},Z={class:"feature-item feature-right"},$={class:"feature-item feature-left"},ee={class:"feature-item feature-right"},te={class:"feature-item feature-left"},se={class:"feature-item feature-right"},ie={key:0,class:"see-more-container"};function ae(s,t,o,d,c,r){const y=L("Link");return l(),n("section",x,[o.manufactures.length>0?(l(),n("div",S,[e("div",M,[t[1]||(t[1]=e("h1",{class:"secondFontStyle vehicle-title"}," VEHICLE STOCK ",-1)),e("div",F,[e("button",{class:h(["tab-btn",{active:c.activeTab==="ALL"}]),onClick:t[0]||(t[0]=i=>r.setActiveTab("ALL"))}," All ",2),(l(!0),n(m,null,p(o.manufactures.slice(0,6),i=>(l(),n("button",{key:i.id,class:h(["tab-btn",{active:c.activeTab===i.title}]),onClick:v=>r.setActiveTab(i.title)},a(i.title),11,V))),128))])]),_(k,{name:"tab-transition",mode:"out-in"},{default:b(()=>[r.filteredVehicles.length>0?(l(),n("div",{class:"tab-contentn",key:c.activeTab+"-cars"},[e("div",D,[(l(!0),n(m,null,p(r.visibleVehicles,(i,v)=>(l(),n("div",{class:"car-card",key:v},[_(y,{class:"card border shadow-sm d-flex flex-column h-100",type:"button",href:s.route("product",{model:s.$root.stringToSlug(i.manufacture.title),slug:s.$root.stringToSlug(i.manufacture.title)+"-"+s.$root.stringToSlug(i.vehicle_model.title),id:i.id})},{default:b(()=>[e("div",N,[e("img",{src:r.getMainImage(i),alt:"Car Image",class:"car-image"},null,8,I),e("div",E,[t[2]||(t[2]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("rect",{x:"2",y:"2",width:"16",height:"16",rx:"2"}),e("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e("path",{d:"M20.4 14.5L16 10 4 20"})],-1)),u(" "+a(i.media.filter(A=>{var g;return((g=A.custom_properties)==null?void 0:g.type)==="vehicle_gallery"}).length),1)])]),e("div",P,[e("div",B,[e("div",R,[t[4]||(t[4]=e("span",{class:"label"},"Price",-1)),e("span",K,[u(a(r.formatPrice(i.price))+" ",1),t[3]||(t[3]=e("span",{class:"currency"},"LKR",-1))]),e("span",z,a(i.priceNote||"Price includes VAT"),1)]),e("div",U,[e("div",j,[i.used_status==="Used"?(l(),n(m,{key:0},[u(a(i.engine_capacity)+" Initial Payment ",1)],64)):(l(),n(m,{key:1},[u(a(i.engine_capacity)+" Engine ",1)],64))]),e("div",H,a(i.year||"24 Month Contract")+" Reg Year ",1),e("div",O,[i.used_status==="Used"?(l(),n(m,{key:0},[u(a(i.mileage)+" Miles P/A ",1)],64)):(l(),n("span",W,"BRAND NEW"))]),i.monthly_price?(l(),n("div",G,[u(a(r.formatPrice(i.monthly_price))+" ",1),t[5]||(t[5]=e("span",{class:"currency"},"LKR",-1)),t[6]||(t[6]=u(" Per Month "))])):f("",!0)])]),e("div",J,[i.manufacture&&i.vehicle_model?(l(),n("h2",Y,a(r.getManufacturerModel(i)),1)):(l(),n("h2",q)),e("p",{class:h(["car-model",r.availabilityColor(i.availability)])},a(i.availability),3)]),e("div",Q,[e("div",X,[t[7]||(t[7]=e("img",{class:"ficon",src:"/images/Assets/seat.svg",alt:"Seat icon"},null,-1)),e("span",null,a(i.seats)+" Seats",1)]),e("div",Z,[t[8]||(t[8]=e("img",{class:"ficon",src:"/images/Assets/doors.svg",alt:"Door icon"},null,-1)),e("span",null,a(i.doors)+" Doors",1)]),e("div",$,[t[9]||(t[9]=e("img",{class:"ficon",src:"/images/Assets/passenger.svg",alt:"Passengers icon"},null,-1)),e("span",null,a(i.passengers)+" persons",1)]),e("div",ee,[t[10]||(t[10]=e("img",{class:"ficon",src:"/images/Assets/flash.svg",alt:"Fuel icon"},null,-1)),e("span",null,a(i.fuel_type),1)]),e("div",te,[t[11]||(t[11]=e("img",{class:"ficon",src:"/images/Assets/automatc.svg",alt:"Transmission icon"},null,-1)),e("span",null,a(i.transmission),1)]),e("div",se,[t[12]||(t[12]=e("img",{class:"ficon",src:"/images/Assets/miles.svg",alt:"Range icon"},null,-1)),e("span",null,a(i.range)+" Miles",1)])])])]),_:2},1032,["href"])]))),128))])])):(l(),n("div",{class:"tab-contentn placeholder-content",key:c.activeTab+"-none"},t[13]||(t[13]=[e("img",{src:"/images/Assets/NotAv.png",alt:"No available cars",class:"placeholder-image"},null,-1),e("p",{class:"no-cars-message"}," No available cars from this brand. ",-1)])))]),_:1}),r.filteredVehicles.length>0?(l(),n("div",ie,t[14]||(t[14]=[e("a",{href:"/available-cars",class:"see-more-link"},"View More Details",-1)]))):f("",!0)])):f("",!0)])}const oe=w(C,[["render",ae],["__scopeId","data-v-18b41b4e"]]);export{oe as default};
