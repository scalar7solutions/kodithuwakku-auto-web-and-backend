import{d as g,J as h,e as M,o as f,w as b,f as o,B as k,g as n,j as p,y,k as d,K as u,E as l,G as V,H as x,D as P,F as U}from"./index-Cq6CXwRA.js";import{S as E,A}from"./AppLayout-B5Zrl-zR.js";import{F as L}from"./FileInputComponent-CiqSnrrK.js";import{E as D}from"./Editor-qk8kO09V.js";import{d as F}from"./index-D2OW0BUk.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={components:{Link:g.Link,AppLayout:A,FileInputComponent:L,SelectInputComponentVue:E,Editor:D},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,features:Array,service_types:Object,vehicle_manufacture:Object,vehicle:Object,type:Object,manufacture:Object,color:Object,model:Object,countries:Array},data(){return{apiKey:"02uoyb8sz5krfq4zmu2myoh8h12gjxk0ol328yxvuoqwu6bn",form:g.useForm({id:"",vehicle_type:"",manufacture_name:"",model:"",seo_url:"",ex_color:"",in_color:"",features:[],transmission:"",year:"",chassis_no:"",condition:"",seats:"",doors:"",passengers:"",engine_capacity:"",mileage:"",fuel_type:"",drive_type:"",auction_grade:"",interior_condition:"",availability:"",editorContent:"",featured:"",latest:"",status:"",vehicle_image:"",countries:[],price:"",used_status:"",monthly_price:"",initial_payment:"",uploaded_Images:[]})}},mounted(){this.vehicle&&(this.form.id=this.vehicle.id,this.form.vehicle_type=this.vehicle.vehicle_type_id,this.form.manufacture_name=this.vehicle.manufacture_id,this.form.model=this.vehicle.vehicle_model_id,this.form.seo_url=this.vehicle.seo_url,this.form.ex_color=this.vehicle.ex_color,this.form.in_color=this.vehicle.in_color,this.form.features=this.vehicle.FeaturesList??[],this.form.transmission=this.vehicle.transmission,this.form.year=this.vehicle.year,this.form.chassis_no=this.vehicle.chassis_no,this.form.condition=this.vehicle.condition,this.form.seats=this.vehicle.seats,this.form.doors=this.vehicle.doors,this.form.passengers=this.vehicle.passengers,this.form.engine_capacity=this.vehicle.engine_capacity,this.form.mileage=this.vehicle.mileage,this.form.fuel_type=this.vehicle.fuel_type,this.form.drive_type=this.vehicle.drive_type,this.form.auction_grade=this.vehicle.auction_grade,this.form.interior_condition=this.vehicle.interior_condition,this.form.availability=this.vehicle.availability,this.form.editorContent=this.vehicle.editorContent,this.form.featured=this.vehicle.featured,this.form.latest=this.vehicle.latest,this.form.status=this.vehicle.status,this.form.countries=this.vehicle.countries||[],this.form.price=this.vehicle.price,this.form.used_status=this.vehicle.used_status,this.form.monthly_price=this.vehicle.monthly_price,this.form.initial_payment=this.vehicle.initial_payment,this.vehicle.media&&this.vehicle.media.length>0&&this.vehicle.media.filter(s=>{var e;return((e=s.custom_properties)==null?void 0:e.type)==="vehicle_gallery"}).forEach(s=>{this.form.uploaded_Images.push({file:s,preview:s.original_url})}))},computed:{countriesOptions(){return this.countries.map(s=>({id:s.id,name:s.name}))},Vehicle_Image(){if(this.vehicle&&this.vehicle.media&&this.vehicle.media.length>0){const s=this.vehicle.media.find(e=>{var r;return((r=e.custom_properties)==null?void 0:r.type)==="vehicle_main"});return s?s.original_url:""}return""},formattedPrice:{get(){const s=this.form.price;if(s==null||s==="")return"";const[e,r]=s.toString().split("."),c=e.replace(/\B(?=(\d{3})+(?!\d))/g,",");return r?`${c}.${r}`:c},set(s){const e=(s||"").replace(/,/g,"");this.form.price=e===""?"":e}},formattedMonthlyPrice:{get(){const s=this.form.monthly_price;if(s==null||s==="")return"";const[e,r]=s.toString().split("."),c=e.replace(/\B(?=(\d{3})+(?!\d))/g,",");return r?`${c}.${r}`:c},set(s){const e=(s||"").replace(/,/g,"");this.form.monthly_price=e===""?"":e}},formattedInitialPayment:{get(){const s=this.form.initial_payment;if(s==null||s==="")return"";const[e,r]=s.toString().split("."),c=e.replace(/\B(?=(\d{3})+(?!\d))/g,",");return r?`${c}.${r}`:c},set(s){const e=(s||"").replace(/,/g,"");this.form.initial_payment=e===""?"":e}}},methods:{handleImageUpload(s){Array.from(s.target.files).forEach(r=>{if(r&&r.type.startsWith("image/")){const c=new FileReader;c.onload=t=>{this.form.uploaded_Images.push({file:r,preview:t.target.result})},c.readAsDataURL(r)}else console.error("Selected file is not an image:",r)})},removeUploadedImage(s){const e=this.form.uploaded_Images[s];e.file&&e.file.original_url&&e.preview&&this.vehicle?F.Inertia.post(route("vehicle.image.remove"),{imageUrl:e.preview,product_id:this.vehicle.id},{onSuccess:()=>{this.form.uploaded_Images.splice(s,1)},onError:r=>{console.error("Error deleting image:",r)}}):this.form.uploaded_Images.splice(s,1)},getModels(){this.$inertia.reload({method:"POST",data:{_method:"GET",manufacture_id:this.form.manufacture_name}})},submit(){this.form.post(this.vehicle?route("vehicle.update"):route("vehicle.store"),{onSuccess:()=>{this.form.reset(),this.$root&&typeof this.$root.showMessage=="function"&&this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A record was saved successfully!")},onError:()=>{this.$root&&typeof this.$root.showMessage=="function"&&this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong!")}})}}},R={class:"row"},j={class:"card mb-4"},N={class:"card-body"},T={class:"row"},K={class:"mb-3 col-md-6",title:"Select the general category of the vehicle (e.g. Car, Van, SUV)."},q={class:"mb-3 col-md-6",title:"Select the manufacturer / brand (e.g. Toyota, BMW)."},G={class:"mb-3 col-md-6",title:"Select the specific model for this vehicle."},z={class:"mb-3 col-md-6",title:"Select the exterior color as seen from outside."},H={class:"mb-3 col-md-6",title:"Select the primary interior color."},W={class:"mb-3 col-md-6"},Y={class:"input-group"},J={class:"text-danger"},Q={class:"mb-3 col-md-12"},X={class:"features-container"},Z=["id","value"],$=["for"],ee={class:"text-danger"},oe={class:"mb-3 col-md-6"},te=["max"],ie={class:"text-danger"},se={class:"mb-3 col-md-6"},re={class:"text-danger"},le={class:"mb-3 col-md-6"},ne={class:"text-danger"},me={class:"mb-3 col-md-6"},ae={class:"text-danger"},de={class:"mb-3 col-md-6"},ue={class:"text-danger"},ce={class:"mb-3 col-md-6"},fe={class:"text-danger"},pe={class:"mb-3 col-md-6"},he={class:"text-danger"},ve={key:0,class:"mb-3 col-md-6"},_e={class:"text-danger"},ge={class:"mb-3 col-md-6"},be={class:"text-danger"},ye={class:"mb-3 col-md-6"},Ve={class:"text-danger"},xe={class:"mb-3 col-md-6"},Ue={class:"input-group"},Ie={class:"text-danger"},we={class:"mb-3 col-md-6"},Se={class:"input-group"},Ce={class:"text-danger"},Me={class:"mb-3 col-md-11"},ke={class:"mb-3 col-md-12"},Pe={class:"text-danger"},Ee={class:"mb-3 col-md-6"},Ae={class:"mb-3 col-md-12"},Le={class:"row"},De={class:"col-md-6"},Fe={class:"text-danger"},Be={class:"col-md-6"},Oe={class:"mb-4",style:{padding:"0.5rem 4%"}},Re={class:"upload-button"},je={class:"btn btn-outline-primary"},Ne={key:0,class:"image-upload-container mt-2"},Te={class:"image-box"},Ke=["src"],qe=["onClick"],Ge={class:"mt-2"},ze=["disabled"];function He(s,e,r,c,t,m){const a=h("SelectInputComponentVue"),I=h("Editor"),w=h("FileInputComponent"),S=h("Link"),C=h("AppLayout");return f(),M(C,null,{default:b(()=>[o("div",R,[o("div",j,[e[56]||(e[56]=o("div",{class:"card-header pb-0"},[o("h5",null,"Vehicle Manufacture"),o("p",null,"Manage Vehicle Manufacture.")],-1)),e[57]||(e[57]=o("hr",null,null,-1)),o("div",N,[o("form",{id:"formAccountSettings",onSubmit:e[31]||(e[31]=k((...i)=>m.submit&&m.submit(...i),["prevent"]))},[o("div",T,[o("div",K,[n(a,{class:"w-100",id:"vehicle_type",label:"Vehicle type *",modelValue:t.form.vehicle_type,"onUpdate:modelValue":e[0]||(e[0]=i=>t.form.vehicle_type=i),options:r.type,error:t.form.errors.vehicle_type},null,8,["modelValue","options","error"])]),o("div",q,[n(a,{class:"w-100",id:"manufacture_name",label:"Manufacture Name *",modelValue:t.form.manufacture_name,"onUpdate:modelValue":e[1]||(e[1]=i=>t.form.manufacture_name=i),options:r.manufacture,error:t.form.errors.manufacture_name,onChange:m.getModels},null,8,["modelValue","options","error","onChange"])]),o("div",G,[n(a,{class:"w-100",id:"model",label:"Model *",modelValue:t.form.model,"onUpdate:modelValue":e[2]||(e[2]=i=>t.form.model=i),options:r.model,error:t.form.errors.model},null,8,["modelValue","options","error"])]),o("div",z,[n(a,{class:"w-100",id:"ex_color",label:"Ex color",modelValue:t.form.ex_color,"onUpdate:modelValue":e[3]||(e[3]=i=>t.form.ex_color=i),options:r.color,error:t.form.errors.ex_color},null,8,["modelValue","options","error"])]),o("div",H,[n(a,{class:"w-100",id:"in_color",label:"In color",modelValue:t.form.in_color,"onUpdate:modelValue":e[4]||(e[4]=i=>t.form.in_color=i),options:r.color,error:t.form.errors.in_color},null,8,["modelValue","options","error"])]),o("div",W,[e[33]||(e[33]=o("label",{for:"price",class:"form-label",title:"Base sale price in LKR, without commas."}," Price ",-1)),o("div",Y,[e[32]||(e[32]=o("span",{class:"input-group-text"},"LKR",-1)),d(o("input",{class:"form-control",type:"text",id:"price",name:"price","onUpdate:modelValue":e[5]||(e[5]=i=>m.formattedPrice=i),inputmode:"decimal"},null,512),[[u,m.formattedPrice]])]),o("div",J,l(t.form.errors.price),1)]),o("div",Q,[e[34]||(e[34]=o("label",{class:"form-label",title:"Select all features that apply to this vehicle."}," Features ",-1)),o("div",X,[(f(!0),p(V,null,x(r.features,(i,v)=>(f(),p("div",{key:v,class:"checkbox-container"},[d(o("input",{type:"checkbox",id:"feature-"+i.id,value:i.id,"onUpdate:modelValue":e[6]||(e[6]=_=>t.form.features=_)},null,8,Z),[[P,t.form.features]]),o("label",{for:"feature-"+i.id},l(i.name),9,$)]))),128))]),o("div",ee,l(t.form.errors.features),1)]),n(a,{id:"transmission",label:"Transmission",error:t.form.errors.transmission,title:"Select the gearbox type.",options:[{id:"Auto",name:"Auto"},{id:"Manual",name:"Manual"},{id:"Triptonic",name:"Triptonic"}],modelValue:t.form.transmission,"onUpdate:modelValue":e[7]||(e[7]=i=>t.form.transmission=i)},null,8,["error","modelValue"]),o("div",oe,[e[35]||(e[35]=o("label",{for:"year",class:"form-label",title:"Production year of the vehicle."}," Year ",-1)),d(o("input",{class:"form-control",type:"number",id:"year",name:"year","onUpdate:modelValue":e[8]||(e[8]=i=>t.form.year=i),max:new Date().getFullYear()+1,min:"1900"},null,8,te),[[u,t.form.year]]),o("div",ie,l(t.form.errors.year),1)]),o("div",se,[e[36]||(e[36]=o("label",{for:"chassis_no",class:"form-label",title:"Unique chassis / VIN number."}," Chassis No ",-1)),d(o("input",{class:"form-control",type:"text",id:"chassis_no",name:"chassis_no","onUpdate:modelValue":e[9]||(e[9]=i=>t.form.chassis_no=i)},null,512),[[u,t.form.chassis_no]]),o("div",re,l(t.form.errors.chassis_no),1)]),o("div",le,[e[37]||(e[37]=o("label",{for:"condition",class:"form-label",title:"Short description of overall condition."}," Condition ",-1)),d(o("input",{class:"form-control",type:"text",id:"condition",name:"condition","onUpdate:modelValue":e[10]||(e[10]=i=>t.form.condition=i)},null,512),[[u,t.form.condition]]),o("div",ne,l(t.form.errors.condition),1)]),o("div",me,[e[38]||(e[38]=o("label",{for:"seats",class:"form-label",title:"Number of seats available."}," Seats ",-1)),d(o("input",{class:"form-control",type:"number",id:"seats",name:"seats","onUpdate:modelValue":e[11]||(e[11]=i=>t.form.seats=i),min:"1"},null,512),[[u,t.form.seats]]),o("div",ae,l(t.form.errors.seats),1)]),o("div",de,[e[39]||(e[39]=o("label",{for:"doors",class:"form-label",title:"Number of doors."}," Doors ",-1)),d(o("input",{class:"form-control",type:"number",id:"doors",name:"doors","onUpdate:modelValue":e[12]||(e[12]=i=>t.form.doors=i),min:"1"},null,512),[[u,t.form.doors]]),o("div",ue,l(t.form.errors.doors),1)]),o("div",ce,[e[40]||(e[40]=o("label",{for:"passengers",class:"form-label",title:"Maximum passengers allowed."}," Passengers ",-1)),d(o("input",{class:"form-control",type:"number",id:"passengers",name:"passengers","onUpdate:modelValue":e[13]||(e[13]=i=>t.form.passengers=i),min:"1"},null,512),[[u,t.form.passengers]]),o("div",fe,l(t.form.errors.passengers),1)]),o("div",pe,[e[41]||(e[41]=o("label",{for:"engine_capacity",class:"form-label",title:"Engine size in cc (e.g. 1500)."}," Engine Capacity ",-1)),d(o("input",{class:"form-control",type:"number",id:"engine_capacity",name:"engine_capacity","onUpdate:modelValue":e[14]||(e[14]=i=>t.form.engine_capacity=i),min:"0",step:"1"},null,512),[[u,t.form.engine_capacity]]),o("div",he,l(t.form.errors.engine_capacity),1)]),n(a,{id:"used_status",label:"Vehicle Status",error:t.form.errors.used_status,title:"Brand new or used.",options:[{id:"Brand New",name:"Brand New"},{id:"Used",name:"Used"}],modelValue:t.form.used_status,"onUpdate:modelValue":e[15]||(e[15]=i=>t.form.used_status=i)},null,8,["error","modelValue"]),t.form.used_status==="Used"?(f(),p("div",ve,[e[42]||(e[42]=o("label",{for:"mileage",class:"form-label",title:"Total mileage already driven."}," Mileage ",-1)),d(o("input",{class:"form-control",type:"number",id:"mileage",name:"mileage","onUpdate:modelValue":e[16]||(e[16]=i=>t.form.mileage=i),min:"0",step:"1"},null,512),[[u,t.form.mileage]]),o("div",_e,l(t.form.errors.mileage),1)])):y("",!0),n(a,{id:"fuel_type",label:"Fuel Type",error:t.form.errors.fuel_type,title:"Main fuel type used by the vehicle.",options:[{id:"Diesel",name:"Diesel"},{id:"Petrol",name:"Petrol"},{id:"Hybrid",name:"Hybrid"},{id:"Electric",name:"Electric"}],modelValue:t.form.fuel_type,"onUpdate:modelValue":e[17]||(e[17]=i=>t.form.fuel_type=i)},null,8,["error","modelValue"]),n(a,{id:"drive_type",label:"Drive Type",error:t.form.errors.drive_type,title:"Right or left side driving.",options:[{id:"Right Side Driving",name:"Right Side Driving"},{id:"Left Side Driving",name:"Left Side Driving"}],modelValue:t.form.drive_type,"onUpdate:modelValue":e[18]||(e[18]=i=>t.form.drive_type=i)},null,8,["error","modelValue"]),o("div",ge,[e[43]||(e[43]=o("label",{for:"auction_grade",class:"form-label",title:"Auction grade (if applicable)."}," Auction Grade ",-1)),d(o("input",{class:"form-control",type:"text",id:"auction_grade",name:"auction_grade","onUpdate:modelValue":e[19]||(e[19]=i=>t.form.auction_grade=i)},null,512),[[u,t.form.auction_grade]]),o("div",be,l(t.form.errors.auction_grade),1)]),o("div",ye,[e[44]||(e[44]=o("label",{for:"interior_condition",class:"form-label",title:"Condition of seats, dashboard, and interior."}," Interior Condition ",-1)),d(o("input",{class:"form-control",type:"text",id:"interior_condition",name:"interior_condition","onUpdate:modelValue":e[20]||(e[20]=i=>t.form.interior_condition=i)},null,512),[[u,t.form.interior_condition]]),o("div",Ve,l(t.form.errors.interior_condition),1)]),n(a,{id:"availability",label:"Availability",error:t.form.errors.availability,title:"Current stock status.",options:[{id:"Available",name:"Available"},{id:"Arriving",name:"Arriving"},{id:"Sold",name:"Sold"}],modelValue:t.form.availability,"onUpdate:modelValue":e[21]||(e[21]=i=>t.form.availability=i)},null,8,["error","modelValue"]),o("div",xe,[e[46]||(e[46]=o("label",{for:"monthly_price",class:"form-label",title:"Monthly installment price in LKR (optional)."}," Monthly Price ",-1)),o("div",Ue,[e[45]||(e[45]=o("span",{class:"input-group-text"},"LKR",-1)),d(o("input",{class:"form-control",type:"text",id:"monthly_price",name:"monthly_price","onUpdate:modelValue":e[22]||(e[22]=i=>m.formattedMonthlyPrice=i),inputmode:"decimal"},null,512),[[u,m.formattedMonthlyPrice]])]),o("div",Ie,l(t.form.errors.monthly_price),1)]),o("div",we,[e[48]||(e[48]=o("label",{for:"initial_payment",class:"form-label",title:"Initial upfront payment in LKR (optional)."}," Initial Payment ",-1)),o("div",Se,[e[47]||(e[47]=o("span",{class:"input-group-text"},"LKR",-1)),d(o("input",{class:"form-control",type:"text",id:"initial_payment",name:"initial_payment","onUpdate:modelValue":e[23]||(e[23]=i=>m.formattedInitialPayment=i),inputmode:"decimal"},null,512),[[u,m.formattedInitialPayment]])]),o("div",Ce,l(t.form.errors.initial_payment),1)]),o("div",Me,[n(a,{id:"countries",label:"Countries",modelValue:t.form.countries,"onUpdate:modelValue":e[24]||(e[24]=i=>t.form.countries=i),options:m.countriesOptions,isMultiple:!0,error:t.form.errors.countries,title:"Select the countries where this vehicle is available."},null,8,["modelValue","options","error"])]),o("div",ke,[e[49]||(e[49]=o("label",{class:"form-label",title:"Full description shown on the detail page."}," Description ",-1)),n(I,{modelValue:t.form.editorContent,"onUpdate:modelValue":e[25]||(e[25]=i=>t.form.editorContent=i),"api-key":t.apiKey,init:{plugins:"lists link image table code help wordcount"}},null,8,["modelValue","api-key"]),o("div",Pe,l(t.form.errors.editorContent),1)]),o("div",Ee,[o("div",Ae,[o("div",Le,[o("div",De,[e[50]||(e[50]=o("label",{for:"image",class:"form-label me-3",title:"Primary image shown on listings."}," Main Image ",-1)),e[51]||(e[51]=o("br",null,null,-1)),n(w,{isRequired:!1,id:"vehicle_image",prvImage:m.Vehicle_Image,modelValue:t.form.vehicle_image,"onUpdate:modelValue":e[26]||(e[26]=i=>t.form.vehicle_image=i)},null,8,["prvImage","modelValue"]),o("div",Fe,l(t.form.errors.vehicle_image),1)]),o("div",Be,[o("div",Oe,[e[54]||(e[54]=o("h6",null,"Gallery Images",-1)),o("div",Re,[o("label",je,[e[52]||(e[52]=U(" Upload Images ")),o("input",{type:"file",multiple:"",onChange:e[27]||(e[27]=(...i)=>m.handleImageUpload&&m.handleImageUpload(...i)),hidden:""},null,32)])]),t.form.uploaded_Images.length>0?(f(),p("div",Ne,[(f(!0),p(V,null,x(t.form.uploaded_Images,(i,v)=>(f(),p("div",{key:v},[o("div",Te,[o("img",{src:i.preview,alt:"Uploaded Image",class:"img-fluid"},null,8,Ke),o("button",{type:"button",class:"remove-btn",onClick:_=>m.removeUploadedImage(v)},e[53]||(e[53]=[o("i",{class:"fas fa-times"},null,-1)]),8,qe)])]))),128))])):y("",!0)])])])]),n(a,{id:"featured",label:"Is Featured",error:t.form.errors.featured,options:[{id:"1",name:"Enable"},{id:"0",name:"Disable"}],modelValue:t.form.featured,"onUpdate:modelValue":e[28]||(e[28]=i=>t.form.featured=i)},null,8,["error","modelValue"]),n(a,{id:"latest",label:"Is Latest",error:t.form.errors.latest,options:[{id:"1",name:"Enable"},{id:"0",name:"Disable"}],modelValue:t.form.latest,"onUpdate:modelValue":e[29]||(e[29]=i=>t.form.latest=i)},null,8,["error","modelValue"]),n(a,{id:"status",label:"Status",error:t.form.errors.status,options:[{id:"1",name:"Active"},{id:"0",name:"Inactive"}],modelValue:t.form.status,"onUpdate:modelValue":e[30]||(e[30]=i=>t.form.status=i)},null,8,["error","modelValue"])])]),o("div",Ge,[o("button",{type:"submit",class:"btn btn-main me-2",disabled:t.form.processing},l(r.vehicle?"Update":"Save"),9,ze),n(S,{class:"btn btn-outline-danger",href:s.route("vehicle_manufacture.index")},{default:b(()=>e[55]||(e[55]=[U(" Cancel ")])),_:1,__:[55]},8,["href"])])],32)])])])]),_:1})}const $e=B(O,[["render",He],["__scopeId","data-v-284a1787"]]);export{$e as default};
