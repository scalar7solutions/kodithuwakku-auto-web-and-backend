import{d as u,J as w,e as h,o as l,w as b,f as s,j as m,y as p,B as c,k as d,K as i,E as t,g,F as y}from"./index-Cq6CXwRA.js";import{A as U}from"./AppLayout-VDZI49Qy.js";import{F as x}from"./FileInputComponent-CiqSnrrK.js";import S from"./SuspendedUserAlert-DYktibNC.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D2OW0BUk.js";const P={components:{Link:u.Link,AppLayout:U,FileInputComponent:x,SuspendedUserAlert:S},props:{errors:Object,allRoles:Object,frontendUser:Object},data(){return{form:u.useForm({id:"",name:"",dob:"",email:"",phone:"",password:"",password_confirmation:"",avatar:""}),password:u.useForm({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){this.frontendUser&&(this.form.id=this.frontendUser.id,this.form.name=this.frontendUser.name,this.form.dob=this.frontendUser.dob,this.form.email=this.frontendUser.email,this.form.phone=this.frontendUser.phone)},computed:{profileImage(){return this.frontendUser?this.frontendUser.avatar??"":""}},methods:{submit(){this.form.post(this.frontendUser?route("customer.update"):route("customer.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(a=>({...a,id:this.form.id})).put(route("customer.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})},viewHistory(a){this.$inertia.get(route("customer.view",{id:a}))}}},C={class:"row"},V={class:"col-md-12"},A={class:"card mb-4"},E={class:"card-header pb-0"},M={class:"card-body"},L={class:"row"},F={class:"mb-3 col-md-6"},B={class:"text-danger"},N={class:"mb-3 col-md-6"},j={class:"text-danger"},D={class:"mb-3 col-md-6"},H={class:"text-danger"},O={class:"mb-3 col-md-6"},R={class:"text-danger"},I={key:0,class:"mb-3 col-md-6"},T={class:"text-danger"},W={key:1,class:"mb-3 col-md-6"},J={class:"text-danger"},K={class:"mt-2"},Y=["disabled"],q={key:0,class:"card"},z={class:"card-body"},G={class:"row"},Q={key:0,class:"mb-3 col-md-6"},X={class:"text-danger"},Z={key:1,class:"mb-3 col-md-6"},ss={class:"text-danger"},os={class:"mt-2"},rs=["disabled"],es={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},ts={class:"modal-dialog modal-sm",role:"document"},ns={class:"modal-content"},ds={class:"modal-body py-0 px-3"},is={class:"row"},as={class:"col mb-1"},ls={class:"text-danger"};function ms(a,o,n,ps,r,f){const v=w("Link"),_=w("AppLayout");return l(),h(_,null,{default:b(()=>[s("div",C,[s("div",V,[s("div",A,[s("div",E,[o[13]||(o[13]=s("h5",null,"Users",-1)),o[14]||(o[14]=s("p",null,"Manage Users.",-1)),n.frontendUser?(l(),m("button",{key:0,class:"btn btn-main",onClick:o[0]||(o[0]=c(e=>f.viewHistory(n.frontendUser.id),["prevent"]))},"View Customer History")):p("",!0)]),o[23]||(o[23]=s("hr",null,null,-1)),s("div",M,[s("form",{id:"formAccountSettings",onSubmit:o[7]||(o[7]=c((...e)=>f.submit&&f.submit(...e),["prevent"]))},[s("div",L,[s("div",F,[o[15]||(o[15]=s("label",{for:"name",class:"form-label"},"Full Name",-1)),d(s("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":o[1]||(o[1]=e=>r.form.name=e)},null,512),[[i,r.form.name]]),s("div",B,t(r.form.errors.name),1)]),s("div",N,[o[16]||(o[16]=s("label",{for:"email",class:"form-label"},"Email",-1)),d(s("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":o[2]||(o[2]=e=>r.form.email=e)},null,512),[[i,r.form.email]]),s("div",j,t(r.form.errors.email),1)]),s("div",D,[o[17]||(o[17]=s("label",{for:"phone",class:"form-label"},"Mobile No",-1)),d(s("input",{class:"form-control",type:"phone",id:"phone",name:"phone","onUpdate:modelValue":o[3]||(o[3]=e=>r.form.phone=e)},null,512),[[i,r.form.phone]]),s("div",H,t(r.form.errors.phone),1)]),s("div",O,[o[18]||(o[18]=s("label",{for:"dob",class:"form-label"},"Date of birth",-1)),d(s("input",{class:"form-control",type:"date",id:"dob",name:"dob","onUpdate:modelValue":o[4]||(o[4]=e=>r.form.dob=e)},null,512),[[i,r.form.dob]]),s("div",R,t(r.form.errors.dob),1)]),o[21]||(o[21]=s("div",{class:"mb-3 col-md-6"},null,-1)),n.frontendUser?p("",!0):(l(),m("div",I,[o[19]||(o[19]=s("label",{for:"password",class:"form-label"},"Password",-1)),d(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":o[5]||(o[5]=e=>r.form.password=e)},null,512),[[i,r.form.password]]),s("div",T,t(r.form.errors.password),1)])),n.frontendUser?p("",!0):(l(),m("div",W,[o[20]||(o[20]=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),d(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":o[6]||(o[6]=e=>r.form.password_confirmation=e)},null,512),[[i,r.form.password_confirmation]]),s("div",J,t(r.form.errors.password),1)]))]),s("div",K,[s("button",{type:"submit",class:"btn btn-main me-2",disabled:r.form.processing},t(n.frontendUser?"Update":"Save"),9,Y),g(v,{class:"btn btn-outline-danger",href:a.route("customer.index")},{default:b(()=>o[22]||(o[22]=[y("Cancel")])),_:1,__:[22]},8,["href"])])],32)])]),n.frontendUser&&n.frontendUser.deleted_at==null?(l(),m("div",q,[o[26]||(o[26]=s("div",{class:"card-header pb-0"},[s("h5",null,"Update Password")],-1)),s("div",z,[s("form",{id:"formAccountSettings",onSubmit:o[10]||(o[10]=c((...e)=>a.updatePasssword&&a.updatePasssword(...e),["prevent"]))},[s("div",G,[n.frontendUser?(l(),m("div",Q,[o[24]||(o[24]=s("label",{for:"password",class:"form-label"},"Password",-1)),d(s("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":o[8]||(o[8]=e=>r.password.password=e)},null,512),[[i,r.password.password]]),s("div",X,t(r.password.errors.password),1)])):p("",!0),n.frontendUser?(l(),m("div",Z,[o[25]||(o[25]=s("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),d(s("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":o[9]||(o[9]=e=>r.password.password_confirmation=e)},null,512),[[i,r.password.password_confirmation]]),s("div",ss,t(r.password.errors.password),1)])):p("",!0)]),s("div",os,[s("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:r.form.processing||!(r.password.password.length>0&&r.password.password_confirmation.length>0)}," Update ",8,rs)])],32)])])):p("",!0)]),s("div",es,[s("div",ts,[s("div",ns,[o[28]||(o[28]=s("div",{class:"modal-header px-3 pb-2"},[s("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1)),s("form",{id:"formAccountDelete",onSubmit:o[12]||(o[12]=c((...e)=>f.changePassword&&f.changePassword(...e),["prevent"]))},[s("div",ds,[s("div",is,[s("div",as,[d(s("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":o[11]||(o[11]=e=>r.password.confirm_password=e)},null,512),[[i,r.password.confirm_password]]),s("div",ls,t(r.password.errors.confirm_password),1)])])]),o[27]||(o[27]=s("div",{class:"modal-footer px-3 pb-3"},[s("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),s("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1))],32)])])])])]),_:1})}const _s=k(P,[["render",ms]]);export{_s as default};
