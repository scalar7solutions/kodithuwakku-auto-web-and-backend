import{L as b,F as p,M as l,o as i,e as n,w as c,f as e,x as _,g as f,A as k,J as g}from"./index-Dluosi3b.js";import{A as y}from"./AppLayout-COeyb3FR.js";import{D as v}from"./DataTable-DEMYnMzJ.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const x={components:{Link:b,AppLayout:y,DataTable:v},data(){return{columns:[{data:"check",name:"check",orderable:!1,searchable:!1},{data:"name",name:"name",orderable:!0,searchable:!0},{data:"email",name:"email",orderable:!0,searchable:!0},{data:"phone",name:"phone",orderable:!0,searchable:!0},{data:"purchase_time",name:"purchase_time",orderable:!0,searchable:!0},{data:"message",name:"message",orderable:!0,searchable:!0},{data:"url",name:"url",orderable:!1,searchable:!0},{data:"status",name:"status",orderable:!0},{data:"action",name:"action",orderable:!0}],columnDefs:[{className:"text-center",targets:[]}],order:[[1,"desc"]],form:p({id:"",status:""})}},mounted(){$("#mytable tbody").on("click","tr .action_delete",s=>{const t=$(s.target).data("item-id");this.selectedRows=[],this.getSelectedItems(t)}),$("#mytable tbody").on("click","tr .action_edit",s=>{const t=$(s.target).data("item-id");this.$inertia.visit(route("inquiry.edit",t))}),$("#mytable tbody").on("click","tr .action_status_change",s=>{const t=$(s.target).data("item-id"),r=$(s.target).data("status");this.updateStatus(t,r)}),$("#mytable tbody").on("click",".item-check input[type=checkbox]",s=>{const t=$(s.target).val();$(s.target).prop("checked")&&!this.selectedRows.includes(t)?this.getSelectedItems(t):this.removeUnselectedItem(t)})},methods:{reloadTable(){this.$refs.datatable.reloadDatatable()},getSelectedItems(s){this.selectedRows.push(s),this.selectedRows.length>0&&(this.$data.isDisabled=!1)},selectAll(s){var t=this;$(s.target).is(":checked")?($(".item-check input[type=checkbox]").prop("checked",!0),$(".item-check input[type=checkbox]:checked").each(function(){t.selectedRows.includes(this.value)||t.getSelectedItems(this.value)}),this.$data.isDisabled=!1):($(".item-check input[type=checkbox]").prop("checked",!1),$(".item-check input[type=checkbox]").each(function(){t.selectedRows.includes(this.value)&&t.removeUnselectedItem(this.value)}),this.$data.isDisabled=!0)},removeUnselectedItem(s){this.selectedRows=this.selectedRows.filter(function(t){return t!=s}),this.selectedRows.length<=0&&($("#selectAll").prop("checked",!1),this.$data.isDisabled=!0)},updateStatus(s,t){this.form.id=s,this.form.status=t,this.form.put(route("vehicle.change.status"),{preserveScroll:!0,onSuccess:()=>{this.form.reset(),this.reloadTable(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"Staus Updated Successfully! ")},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},deleteSelectedItems(){this.form.transform(s=>({...s,ids:[...this.selectedRows]})).post(route("inquiry.delete"),{onSuccess:()=>{this.resetForm(),this.reloadTable(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{$("#deleteConfirm").modal("hide"),this.resetForm()}})},resetForm(){this.form.reset("id","status")}}},S={class:"row"},A={class:"col-md-12"},I={class:"card mb-4"},D={class:"card-header pb-0"},R=e("h5",null,"Inquiries",-1),C=e("p",null,"Manage Inquiries.",-1),L={class:"d-flex"},M=e("i",{class:"bx bx-plus"},null,-1),F=g(" Create "),N={class:"card-body"},T={width:"10%"},q={class:"custom-control custom-checkbox"},E=e("label",{class:"form-check-label",for:"selectAll"},null,-1),U=e("th",null,"Name",-1),V=e("th",null,"Email",-1),B=e("th",null,"Phone",-1),P=e("th",null,"Purchase Time",-1),Y=e("th",null,"Message",-1),J=e("th",null,"URL",-1),W=e("th",null,"Status",-1),j=e("th",null,"Action",-1),z={class:"modal modal-top fade",id:"deleteConfirm",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},G={class:"modal-dialog modal-sm",role:"document"},H={class:"modal-content"},K=e("div",{class:"modal-header px-3 pb-2"},[e("h5",{class:"modal-title",id:"exampleModalLabel2"},"Are You Sure?")],-1),O=e("div",{class:"modal-body py-0 px-3"},[e("div",{class:"row"},[e("div",{class:"col mb-1"},[e("p",null,"Are you sure you want to delete?")])])],-1),Q={class:"modal-footer px-3 pb-3"},X=e("button",{type:"submit",class:"btn btn-sm btn-primary"}," Yes ",-1);function Z(s,t,r,ee,d,a){const h=l("Link"),u=l("data-table"),m=l("AppLayout");return i(),n(m,null,{default:c(()=>[e("div",S,[e("div",A,[e("div",I,[e("div",D,[R,C,e("div",L,[s.$root.hasPermission("")?(i(),n(h,{key:0,class:"btn btn-main btn-sm",href:s.route("")},{default:c(()=>[M,F]),_:1},8,["href"])):_("",!0)])]),e("div",N,[f(u,{ref:"datatable",id:"mytable",url:s.route("inquiry.getdata"),columns:d.columns,columnDefs:d.columnDefs},{header:c(()=>[e("tr",null,[e("th",T,[e("div",q,[e("input",{type:"checkbox",class:"form-check-input",id:"selectAll",onClick:t[0]||(t[0]=o=>a.selectAll(o))}),E])]),U,V,B,P,Y,J,W,j])]),_:1},8,["url","columns","columnDefs"])])])]),e("div",z,[e("div",G,[e("div",H,[K,e("form",{id:"formAccountDelete",onSubmit:t[2]||(t[2]=k((...o)=>a.deleteSelectedItems&&a.deleteSelectedItems(...o),["prevent"]))},[O,e("div",Q,[e("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=(...o)=>a.resetForm&&a.resetForm(...o))}," Close "),X])],32)])])])])]),_:1})}const le=w(x,[["render",Z]]);export{le as default};
