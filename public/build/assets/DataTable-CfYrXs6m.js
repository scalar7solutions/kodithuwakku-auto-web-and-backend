import{d as l}from"./index-D2OW0BUk.js";import{_ as i}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{j as u,o as d,f as o,l as f,x as c}from"./index-Cq6CXwRA.js";const p={props:{id:{type:String,default:"mytable",required:!0},class_str:{type:String,default:"display table table-striped table-hover",required:!1},url:{type:String,required:!0},reOrderUrl:{type:String,default:null,required:!1},method:{type:String,default:function(){return"GET"},required:!1},columns:{type:Array,required:!0},columnDefs:{default:function(){return[]},type:Array,required:!1},order:{default:function(){return[]},type:Array,required:!1},buttons:{default:function(){return[]},type:Array},displayLength:{type:Number,default:function(){return 25}},reload:{type:Boolean,default:function(){return!1}},lengthMenu:{type:Array,default:function(){return[[25,50,100,500],["25 rows","50 rows","100 rows","500 rows"]]}},submitData:{type:Object,default:function(){return{}}}},data(){return{pageLength:25}},mounted(){this.datatable()},watch:{submitData(e,r){console.log(`Count changed from ${r} to ${e}`)}},methods:{datatable(){var e=this,r=this.$page.props.csrf_token,s=$("#"+this.id).DataTable({dom:"Blfr<'box table-responsive text-nowrap drag't>ip",buttons:this.buttons,processing:!0,serverSide:!0,retrieve:!0,aaSorting:[],ajax:{url:this.url,method:this.method,data:function(t){t._token=r;for(const a in e.submitData)t[a]=e.submitData[a]}},order:this.order,columnDefs:this.columnDefs,columns:this.columns,lengthMenu:this.lengthMenu,displayLength:this.displayLength,select:{style:"multi",selector:"td div.item-check input[type=checkbox]"},initComplete:function(){var t=0;$(".drag").on({mousemove:function(a){var n=a.pageX-this.offsetLeft;t&&(this.scrollLeft=this.sx+t-n)},mousedown:function(a){this.sx=this.scrollLeft,t=a.pageX-this.offsetLeft}}),$(document).on("mouseup",function(){t=0})}});$(".dt-buttons").addClass("float-right"),$(".dataTables_filter").addClass("float-left"),$("#mytable_processing").addClass("mg-top-26s").html(`<div class="spinner-border text-primary" role="status">
                                    <span class="sr-only">Loading...</span>
                                    </div>`),$(".buttons-copy, .buttons-csv, .buttons-print, .buttons-pdf, .buttons-excel").addClass("btn btn-main mr-1 btn-sm"),$("#"+this.id).on("length.dt",function(t,a,n){e.pageLength=n}),$("#mytable tbody").sortable({items:"tr",handle:".change-order",cursor:"move",opacity:.6,update:function(){var t=s.page.info();e.reOrderColumns(t)}})},reloadDatatable(){var e=$("#"+this.id).DataTable();e.ajax.reload()},reOrderColumns(e){var r=this,s=e.start;e.end;var t=[];$("tr div.change-order").each(function(a,n){t.push({id:$(this).attr("data-item-id"),position:s+(a+1)})}),r.reOrderUrl&&l.Inertia.post(r.reOrderUrl,{rows:t},{preserveScroll:!0,onSuccess:()=>{r.reloadDatatable()}})}}};function m(e,r,s,t,a,n){return d(),u("div",null,[o("table",{id:"mytable",class:c(s.class_str)},[o("thead",null,[f(e.$slots,"header")]),r[0]||(r[0]=o("tbody",null,null,-1))],2)])}const g=i(p,[["render",m]]);export{g as D};
