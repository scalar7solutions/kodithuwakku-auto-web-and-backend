import{d as g,J as f,e as k,o as c,w as b,f as o,B as M,g as n,j as p,y,k as a,K as d,E as l,G as V,H as x,D as E,F as U}from"./index-Cq6CXwRA.js";import{S as A,A as L}from"./AppLayout-D4Lv9NjB.js";import{F as D}from"./FileInputComponent-CiqSnrrK.js";import{E as F}from"./Editor-qk8kO09V.js";import{d as O}from"./index-D2OW0BUk.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={components:{Link:g.Link,AppLayout:L,FileInputComponent:D,SelectInputComponentVue:A,Editor:F},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,features:Array,service_types:Object,vehicle_manufacture:Object,vehicle:Object,type:Object,manufacture:Object,color:Object,model:Object,countries:Array},data(){return{apiKey:"02uoyb8sz5krfq4zmu2myoh8h12gjxk0ol328yxvuoqwu6bn",form:g.useForm({id:"",vehicle_type:"",manufacture_name:"",model:"",seo_url:"",ex_color:"",in_color:"",features:[],transmission:"",year:"",chassis_no:"",condition:"",seats:"",doors:"",passengers:"",engine_capacity:"",mileage:"",fuel_type:"",drive_type:"",auction_grade:"",interior_condition:"",availability:"",editorContent:"",featured:"",latest:"",status:"",vehicle_image:"",countries:[],price:"",used_status:"",monthly_price:"",initial_payment:"",uploaded_Images:[]})}},mounted(){this.vehicle&&(this.form.id=this.vehicle.id,this.form.vehicle_type=this.vehicle.vehicle_type_id,this.form.manufacture_name=this.vehicle.manufacture_id,this.form.model=this.vehicle.vehicle_model_id,this.form.seo_url=this.vehicle.seo_url,this.form.ex_color=this.vehicle.ex_color,this.form.in_color=this.vehicle.in_color,this.form.features=this.vehicle.FeaturesList??[],this.form.transmission=this.vehicle.transmission,this.form.year=this.vehicle.year,this.form.chassis_no=this.vehicle.chassis_no,this.form.condition=this.vehicle.condition,this.form.seats=this.vehicle.seats,this.form.doors=this.vehicle.doors,this.form.passengers=this.vehicle.passengers,this.form.engine_capacity=this.vehicle.engine_capacity,this.form.mileage=this.vehicle.mileage,this.form.fuel_type=this.vehicle.fuel_type,this.form.drive_type=this.vehicle.drive_type,this.form.auction_grade=this.vehicle.auction_grade,this.form.interior_condition=this.vehicle.interior_condition,this.form.availability=this.vehicle.availability,this.form.editorContent=this.vehicle.editorContent,this.form.featured=this.vehicle.featured,this.form.latest=this.vehicle.latest,this.form.status=this.vehicle.status,this.form.countries=this.vehicle.countries||[],this.form.price=this.vehicle.price,this.form.used_status=this.vehicle.used_status,this.form.monthly_price=this.vehicle.monthly_price,this.form.initial_payment=this.vehicle.initial_payment,this.vehicle.media&&this.vehicle.media.length>0&&this.vehicle.media.filter(t=>{var e;return((e=t.custom_properties)==null?void 0:e.type)==="vehicle_gallery"}).forEach(t=>{this.form.uploaded_Images.push({file:t,preview:t.original_url})}))},computed:{countriesOptions(){return this.countries.map(t=>({id:t.id,name:t.name}))},Vehicle_Image(){if(this.vehicle&&this.vehicle.media&&this.vehicle.media.length>0){const t=this.vehicle.media.find(e=>{var r;return((r=e.custom_properties)==null?void 0:r.type)==="vehicle_main"});return t?t.original_url:""}return""}},methods:{handleImageUpload(t){Array.from(t.target.files).forEach(r=>{if(r&&r.type.startsWith("image/")){const v=new FileReader;v.onload=i=>{this.form.uploaded_Images.push({file:r,preview:i.target.result})},v.readAsDataURL(r)}else console.error("Selected file is not an image:",r)})},removeUploadedImage(t){const e=this.form.uploaded_Images[t];e.file&&e.file.original_url&&e.preview&&this.vehicle?O.Inertia.post(route("vehicle.image.remove"),{imageUrl:e.preview,product_id:this.vehicle.id},{onSuccess:()=>{this.form.uploaded_Images.splice(t,1)},onError:r=>{console.error("Error deleting image:",r)}}):this.form.uploaded_Images.splice(t,1)},getModels(){this.$inertia.reload({method:"POST",data:{_method:"GET",manufacture_id:this.form.manufacture_name}})},submit(){this.form.post(this.vehicle?route("vehicle.update"):route("vehicle.store"),{onSuccess:()=>{this.form.reset(),this.$root&&typeof this.$root.showMessage=="function"&&this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A record was saved successfully!")},onError:()=>{this.$root&&typeof this.$root.showMessage=="function"&&this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong!")}})}}},N={class:"row"},T={class:"card mb-4"},B={class:"card-body"},K={class:"row"},P={class:"mb-3 col-md-6",title:"Select the general category of the vehicle (e.g. Car, Van, SUV)."},q={class:"mb-3 col-md-6",title:"Select the manufacturer / brand (e.g. Toyota, BMW)."},G={class:"mb-3 col-md-6",title:"Select the specific model for this vehicle."},z={class:"mb-3 col-md-6",title:"Select the exterior color as seen from outside."},H={class:"mb-3 col-md-6",title:"Select the primary interior color."},W={class:"mb-3 col-md-6"},Y={class:"input-group"},J={class:"text-danger"},Q={class:"mb-3 col-md-12"},X={class:"features-container"},Z=["id","value"],$=["for"],ee={class:"text-danger"},oe={class:"mb-3 col-md-6"},ie=["max"],se={class:"text-danger"},te={class:"mb-3 col-md-6"},re={class:"text-danger"},le={class:"mb-3 col-md-6"},ne={class:"text-danger"},me={class:"mb-3 col-md-6"},ae={class:"text-danger"},de={class:"mb-3 col-md-6"},ue={class:"text-danger"},ce={class:"mb-3 col-md-6"},pe={class:"text-danger"},fe={class:"mb-3 col-md-6"},he={class:"text-danger"},ve={key:0,class:"mb-3 col-md-6"},_e={class:"text-danger"},ge={class:"mb-3 col-md-6"},be={class:"text-danger"},ye={class:"mb-3 col-md-6"},Ve={class:"text-danger"},xe={class:"mb-3 col-md-6"},Ue={class:"input-group"},Ie={class:"text-danger"},we={class:"mb-3 col-md-6"},Se={class:"input-group"},Ce={class:"text-danger"},ke={class:"mb-3 col-md-11"},Me={class:"mb-3 col-md-12"},Ee={class:"text-danger"},Ae={class:"mb-3 col-md-6"},Le={class:"mb-3 col-md-12"},De={class:"row"},Fe={class:"col-md-6"},Oe={class:"text-danger"},Re={class:"col-md-6"},je={class:"mb-4",style:{padding:"0.5rem 4%"}},Ne={class:"upload-button"},Te={class:"btn btn-outline-primary"},Be={key:0,class:"image-upload-container mt-2"},Ke={class:"image-box"},Pe=["src"],qe=["onClick"],Ge={class:"mt-2"},ze=["disabled"];function He(t,e,r,v,i,u){const m=f("SelectInputComponentVue"),I=f("Editor"),w=f("FileInputComponent"),S=f("Link"),C=f("AppLayout");return c(),k(C,null,{default:b(()=>[o("div",N,[o("div",T,[e[56]||(e[56]=o("div",{class:"card-header pb-0"},[o("h5",null,"Vehicle Manufacture"),o("p",null,"Manage Vehicle Manufacture.")],-1)),e[57]||(e[57]=o("hr",null,null,-1)),o("div",B,[o("form",{id:"formAccountSettings",onSubmit:e[31]||(e[31]=M((...s)=>u.submit&&u.submit(...s),["prevent"]))},[o("div",K,[o("div",P,[n(m,{class:"w-100",id:"vehicle_type",label:"Vehicle type *",modelValue:i.form.vehicle_type,"onUpdate:modelValue":e[0]||(e[0]=s=>i.form.vehicle_type=s),options:r.type,error:i.form.errors.vehicle_type},null,8,["modelValue","options","error"])]),o("div",q,[n(m,{class:"w-100",id:"manufacture_name",label:"Manufacture Name *",modelValue:i.form.manufacture_name,"onUpdate:modelValue":e[1]||(e[1]=s=>i.form.manufacture_name=s),options:r.manufacture,error:i.form.errors.manufacture_name,onChange:u.getModels},null,8,["modelValue","options","error","onChange"])]),o("div",G,[n(m,{class:"w-100",id:"model",label:"Model *",modelValue:i.form.model,"onUpdate:modelValue":e[2]||(e[2]=s=>i.form.model=s),options:r.model,error:i.form.errors.model},null,8,["modelValue","options","error"])]),o("div",z,[n(m,{class:"w-100",id:"ex_color",label:"Ex color",modelValue:i.form.ex_color,"onUpdate:modelValue":e[3]||(e[3]=s=>i.form.ex_color=s),options:r.color,error:i.form.errors.ex_color},null,8,["modelValue","options","error"])]),o("div",H,[n(m,{class:"w-100",id:"in_color",label:"In color",modelValue:i.form.in_color,"onUpdate:modelValue":e[4]||(e[4]=s=>i.form.in_color=s),options:r.color,error:i.form.errors.in_color},null,8,["modelValue","options","error"])]),o("div",W,[e[33]||(e[33]=o("label",{for:"price",class:"form-label",title:"Base sale price in LKR, without commas."}," Price ",-1)),o("div",Y,[e[32]||(e[32]=o("span",{class:"input-group-text"},"LKR",-1)),a(o("input",{class:"form-control",type:"number",id:"price",name:"price","onUpdate:modelValue":e[5]||(e[5]=s=>i.form.price=s),min:"0",step:"0.01",inputmode:"decimal"},null,512),[[d,i.form.price]])]),o("div",J,l(i.form.errors.price),1)]),o("div",Q,[e[34]||(e[34]=o("label",{class:"form-label",title:"Select all features that apply to this vehicle."}," Features ",-1)),o("div",X,[(c(!0),p(V,null,x(r.features,(s,h)=>(c(),p("div",{key:h,class:"checkbox-container"},[a(o("input",{type:"checkbox",id:"feature-"+s.id,value:s.id,"onUpdate:modelValue":e[6]||(e[6]=_=>i.form.features=_)},null,8,Z),[[E,i.form.features]]),o("label",{for:"feature-"+s.id},l(s.name),9,$)]))),128))]),o("div",ee,l(i.form.errors.features),1)]),n(m,{id:"transmission",label:"Transmission",error:i.form.errors.transmission,title:"Select the gearbox type.",options:[{id:"Auto",name:"Auto"},{id:"Manual",name:"Manual"},{id:"Triptonic",name:"Triptonic"}],modelValue:i.form.transmission,"onUpdate:modelValue":e[7]||(e[7]=s=>i.form.transmission=s)},null,8,["error","modelValue"]),o("div",oe,[e[35]||(e[35]=o("label",{for:"year",class:"form-label",title:"Production year of the vehicle."}," Year ",-1)),a(o("input",{class:"form-control",type:"number",id:"year",name:"year","onUpdate:modelValue":e[8]||(e[8]=s=>i.form.year=s),max:new Date().getFullYear()+1,min:"1900"},null,8,ie),[[d,i.form.year]]),o("div",se,l(i.form.errors.year),1)]),o("div",te,[e[36]||(e[36]=o("label",{for:"chassis_no",class:"form-label",title:"Unique chassis / VIN number."}," Chassis No ",-1)),a(o("input",{class:"form-control",type:"text",id:"chassis_no",name:"chassis_no","onUpdate:modelValue":e[9]||(e[9]=s=>i.form.chassis_no=s)},null,512),[[d,i.form.chassis_no]]),o("div",re,l(i.form.errors.chassis_no),1)]),o("div",le,[e[37]||(e[37]=o("label",{for:"condition",class:"form-label",title:"Short description of overall condition."}," Condition ",-1)),a(o("input",{class:"form-control",type:"text",id:"condition",name:"condition","onUpdate:modelValue":e[10]||(e[10]=s=>i.form.condition=s)},null,512),[[d,i.form.condition]]),o("div",ne,l(i.form.errors.condition),1)]),o("div",me,[e[38]||(e[38]=o("label",{for:"seats",class:"form-label",title:"Number of seats available."}," Seats ",-1)),a(o("input",{class:"form-control",type:"number",id:"seats",name:"seats","onUpdate:modelValue":e[11]||(e[11]=s=>i.form.seats=s),min:"1"},null,512),[[d,i.form.seats]]),o("div",ae,l(i.form.errors.seats),1)]),o("div",de,[e[39]||(e[39]=o("label",{for:"doors",class:"form-label",title:"Number of doors."}," Doors ",-1)),a(o("input",{class:"form-control",type:"number",id:"doors",name:"doors","onUpdate:modelValue":e[12]||(e[12]=s=>i.form.doors=s),min:"1"},null,512),[[d,i.form.doors]]),o("div",ue,l(i.form.errors.doors),1)]),o("div",ce,[e[40]||(e[40]=o("label",{for:"passengers",class:"form-label",title:"Maximum passengers allowed."}," Passengers ",-1)),a(o("input",{class:"form-control",type:"number",id:"passengers",name:"passengers","onUpdate:modelValue":e[13]||(e[13]=s=>i.form.passengers=s),min:"1"},null,512),[[d,i.form.passengers]]),o("div",pe,l(i.form.errors.passengers),1)]),o("div",fe,[e[41]||(e[41]=o("label",{for:"engine_capacity",class:"form-label",title:"Engine size in cc (e.g. 1500)."}," Engine Capacity ",-1)),a(o("input",{class:"form-control",type:"number",id:"engine_capacity",name:"engine_capacity","onUpdate:modelValue":e[14]||(e[14]=s=>i.form.engine_capacity=s),min:"0",step:"1"},null,512),[[d,i.form.engine_capacity]]),o("div",he,l(i.form.errors.engine_capacity),1)]),n(m,{id:"used_status",label:"Vehicle Status",error:i.form.errors.used_status,title:"Brand new or used.",options:[{id:"Brand New",name:"Brand New"},{id:"Used",name:"Used"}],modelValue:i.form.used_status,"onUpdate:modelValue":e[15]||(e[15]=s=>i.form.used_status=s)},null,8,["error","modelValue"]),i.form.used_status==="Used"?(c(),p("div",ve,[e[42]||(e[42]=o("label",{for:"mileage",class:"form-label",title:"Total mileage already driven."}," Mileage ",-1)),a(o("input",{class:"form-control",type:"number",id:"mileage",name:"mileage","onUpdate:modelValue":e[16]||(e[16]=s=>i.form.mileage=s),min:"0",step:"1"},null,512),[[d,i.form.mileage]]),o("div",_e,l(i.form.errors.mileage),1)])):y("",!0),n(m,{id:"fuel_type",label:"Fuel Type",error:i.form.errors.fuel_type,title:"Main fuel type used by the vehicle.",options:[{id:"Diesel",name:"Diesel"},{id:"Petrol",name:"Petrol"},{id:"Hybrid",name:"Hybrid"},{id:"Electric",name:"Electric"}],modelValue:i.form.fuel_type,"onUpdate:modelValue":e[17]||(e[17]=s=>i.form.fuel_type=s)},null,8,["error","modelValue"]),n(m,{id:"drive_type",label:"Drive Type",error:i.form.errors.drive_type,title:"Right or left side driving.",options:[{id:"Right Side Driving",name:"Right Side Driving"},{id:"Left Side Driving",name:"Left Side Driving"}],modelValue:i.form.drive_type,"onUpdate:modelValue":e[18]||(e[18]=s=>i.form.drive_type=s)},null,8,["error","modelValue"]),o("div",ge,[e[43]||(e[43]=o("label",{for:"auction_grade",class:"form-label",title:"Auction grade (if applicable)."}," Auction Grade ",-1)),a(o("input",{class:"form-control",type:"text",id:"auction_grade",name:"auction_grade","onUpdate:modelValue":e[19]||(e[19]=s=>i.form.auction_grade=s)},null,512),[[d,i.form.auction_grade]]),o("div",be,l(i.form.errors.auction_grade),1)]),o("div",ye,[e[44]||(e[44]=o("label",{for:"interior_condition",class:"form-label",title:"Condition of seats, dashboard, and interior."}," Interior Condition ",-1)),a(o("input",{class:"form-control",type:"text",id:"interior_condition",name:"interior_condition","onUpdate:modelValue":e[20]||(e[20]=s=>i.form.interior_condition=s)},null,512),[[d,i.form.interior_condition]]),o("div",Ve,l(i.form.errors.interior_condition),1)]),n(m,{id:"availability",label:"Availability",error:i.form.errors.availability,title:"Current stock status.",options:[{id:"Available",name:"Available"},{id:"Arriving",name:"Arriving"},{id:"Sold",name:"Sold"}],modelValue:i.form.availability,"onUpdate:modelValue":e[21]||(e[21]=s=>i.form.availability=s)},null,8,["error","modelValue"]),o("div",xe,[e[46]||(e[46]=o("label",{for:"monthly_price",class:"form-label",title:"Monthly installment price in LKR (optional)."}," Monthly Price ",-1)),o("div",Ue,[e[45]||(e[45]=o("span",{class:"input-group-text"},"LKR",-1)),a(o("input",{class:"form-control",type:"number",id:"monthly_price",name:"monthly_price","onUpdate:modelValue":e[22]||(e[22]=s=>i.form.monthly_price=s),min:"0",step:"0.01",inputmode:"decimal"},null,512),[[d,i.form.monthly_price]])]),o("div",Ie,l(i.form.errors.monthly_price),1)]),o("div",we,[e[48]||(e[48]=o("label",{for:"initial_payment",class:"form-label",title:"Initial upfront payment in LKR (optional)."}," Initial Payment ",-1)),o("div",Se,[e[47]||(e[47]=o("span",{class:"input-group-text"},"LKR",-1)),a(o("input",{class:"form-control",type:"number",id:"initial_payment",name:"initial_payment","onUpdate:modelValue":e[23]||(e[23]=s=>i.form.initial_payment=s),min:"0",step:"0.01",inputmode:"decimal"},null,512),[[d,i.form.initial_payment]])]),o("div",Ce,l(i.form.errors.initial_payment),1)]),o("div",ke,[n(m,{id:"countries",label:"Countries",modelValue:i.form.countries,"onUpdate:modelValue":e[24]||(e[24]=s=>i.form.countries=s),options:u.countriesOptions,isMultiple:!0,error:i.form.errors.countries,title:"Select the countries where this vehicle is available."},null,8,["modelValue","options","error"])]),o("div",Me,[e[49]||(e[49]=o("label",{class:"form-label",title:"Full description shown on the detail page."}," Description ",-1)),n(I,{modelValue:i.form.editorContent,"onUpdate:modelValue":e[25]||(e[25]=s=>i.form.editorContent=s),"api-key":i.apiKey,init:{plugins:"lists link image table code help wordcount"}},null,8,["modelValue","api-key"]),o("div",Ee,l(i.form.errors.editorContent),1)]),o("div",Ae,[o("div",Le,[o("div",De,[o("div",Fe,[e[50]||(e[50]=o("label",{for:"image",class:"form-label me-3",title:"Primary image shown on listings."}," Main Image ",-1)),e[51]||(e[51]=o("br",null,null,-1)),n(w,{isRequired:!1,id:"vehicle_image",prvImage:u.Vehicle_Image,modelValue:i.form.vehicle_image,"onUpdate:modelValue":e[26]||(e[26]=s=>i.form.vehicle_image=s)},null,8,["prvImage","modelValue"]),o("div",Oe,l(i.form.errors.vehicle_image),1)]),o("div",Re,[o("div",je,[e[54]||(e[54]=o("h6",null,"Gallery Images",-1)),o("div",Ne,[o("label",Te,[e[52]||(e[52]=U(" Upload Images ")),o("input",{type:"file",multiple:"",onChange:e[27]||(e[27]=(...s)=>u.handleImageUpload&&u.handleImageUpload(...s)),hidden:""},null,32)])]),i.form.uploaded_Images.length>0?(c(),p("div",Be,[(c(!0),p(V,null,x(i.form.uploaded_Images,(s,h)=>(c(),p("div",{key:h},[o("div",Ke,[o("img",{src:s.preview,alt:"Uploaded Image",class:"img-fluid"},null,8,Pe),o("button",{type:"button",class:"remove-btn",onClick:_=>u.removeUploadedImage(h)},e[53]||(e[53]=[o("i",{class:"fas fa-times"},null,-1)]),8,qe)])]))),128))])):y("",!0)])])])]),n(m,{id:"featured",label:"Is Featured",error:i.form.errors.featured,options:[{id:"1",name:"Enable"},{id:"0",name:"Disable"}],modelValue:i.form.featured,"onUpdate:modelValue":e[28]||(e[28]=s=>i.form.featured=s)},null,8,["error","modelValue"]),n(m,{id:"latest",label:"Is Latest",error:i.form.errors.latest,options:[{id:"1",name:"Enable"},{id:"0",name:"Disable"}],modelValue:i.form.latest,"onUpdate:modelValue":e[29]||(e[29]=s=>i.form.latest=s)},null,8,["error","modelValue"]),n(m,{id:"status",label:"Status",error:i.form.errors.status,options:[{id:"1",name:"Active"},{id:"0",name:"Inactive"}],modelValue:i.form.status,"onUpdate:modelValue":e[30]||(e[30]=s=>i.form.status=s)},null,8,["error","modelValue"])])]),o("div",Ge,[o("button",{type:"submit",class:"btn btn-main me-2",disabled:i.form.processing},l(r.vehicle?"Update":"Save"),9,ze),n(S,{class:"btn btn-outline-danger",href:t.route("vehicle_manufacture.index")},{default:b(()=>e[55]||(e[55]=[U(" Cancel ")])),_:1,__:[55]},8,["href"])])],32)])])])]),_:1})}const $e=R(j,[["render",He],["__scopeId","data-v-822cadea"]]);export{$e as default};
